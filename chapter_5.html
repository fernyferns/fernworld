<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="robots" content="noindex">
    <title>Fernworld</title>
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Chilanka&display=swap" rel="stylesheet">
    <style>
        html {
            margin-top: 1.5em;
            margin-bottom: 1.5em;
            margin-left: 2em;
            margin-right: 2em;
            max-width: 800px;
        }

        * {
            font-family: 'Chilanka';
        }

        p {
            margin-bottom: 1.3em;
        }

        .alert {
            background-color: lemonchiffon;
        }
    </style>
    <script src="./sjcl.js"></script>
</head>

<script>

    var alertShown = false;

    function login(manualLogin = false) {

        var password = "";

        try {

            if (manualLogin) {
                password = document.getElementById("password").value || "";
                localStorage.setItem("password", password);
                decryptAndRender(password);
                return;
            }

            else {

                //check if password is in query string
                password = getParameterByName("password");
                if (password) {
                    localStorage.setItem("password", password);
                    decryptAndRender(password);
                    return;
                }

                //check if password is already in storage
                password = localStorage.getItem("password");
                if (password) {
                    decryptAndRender(password);
                    return;
                }

            }

        } catch (error) {
            //clear session storage on error.
            localStorage.removeItem("password");
            if (error) {
                if (error.message == "ccm: tag doesn't match") {
                    showAlert("Password incorrect");
                } else if (error.message) {
                    showAlert(error.message);
                } else {
                    showAlert("Something went wrong.");
                }
            }
        }

    }

    function decryptAndRender(password) {
        var decryptedHtmlPage = sjcl.decrypt(password, encryptedHtml);
        document.open("text/html", "replace");
        document.write(decryptedHtmlPage);
        document.close();
    }

    function getParameterByName(name, url = window.location.href) {
        name = name.replace(/[\[\]]/g, '\\$&');
        var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, ' '));
    }

    function showAlert(message) {
        var container = document.getElementById("alert");
        if (container) {
            container.outerHTML = `<p id="alert" class="alert" onClick="dismissAlert()"><a href="#" onClick="dismissAlert()">[x]</a>&nbsp;&nbsp;${message}</p>`;
            alertShown = true;
        }
    }

    function dismissAlert() {
        var container = document.getElementById("alert");
        if (container) {
            container.outerHTML = `<p id="alert"></p>`;
            alertShown = false;
        }
    }

    function passwordKeyPress(event) {
        if (alertShown) {
            dismissAlert();
        }
        if (event.key == "Enter") {
            login(true);
        }
    }

    var encryptedHtml = '{"iv":"COx+ifXI7qfAeZ49L+EpOA==","v":1,"iter":10000,"ks":128,"ts":64,"mode":"ccm","adata":"","cipher":"aes","salt":"q/JLYWZTrII=","ct":"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"}';

    login();


</script>

<body onload="onLoad()">

    <noscript>
        <p class="alert">This site requires JavaScript to function. Login will not function without scripts enabled.</p>
    </noscript>

    <p id="alert"></p>

    <h1>
        Login
    </h1>

    <div>
        <label for="password">Password</label>
        <input type="password" id="password" required disabled onkeypress="passwordKeyPress(event)" />
        <p>Ask Fern if you don't know the password.</p>
    </div>

    <p>
        <button disabled type="button" id="loginBtn" onclick="login(true)">
            Login
        </button>
    </p>

    <script>

        function onLoad() {

            //enable login button.
            document.getElementById("loginBtn").removeAttribute("disabled");
            document.getElementById("password").removeAttribute("disabled");

            login();

        }

    </script>

</body>

</html>