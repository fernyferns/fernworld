<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="robots" content="noindex">
    <title>Fernworld</title>
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Chilanka&display=swap" rel="stylesheet">
    <style>
        html {
            margin-top: 1.5em;
            margin-bottom: 1.5em;
            margin-left: 2em;
            margin-right: 2em;
            max-width: 800px;
        }

        * {
            font-family: 'Chilanka';
        }

        p {
            margin-bottom: 1.3em;
        }

        .alert {
            background-color: lemonchiffon;
        }
    </style>
    <script src="./sjcl.js"></script>
</head>

<script>

    var alertShown = false;

    function login(manualLogin = false) {

        var password = "";

        try {

            if (manualLogin) {
                password = document.getElementById("password").value || "";
                localStorage.setItem("password", password);
                decryptAndRender(password);
                return;
            }

            else {

                //check if password is in query string
                password = getParameterByName("password");
                if (password) {
                    localStorage.setItem("password", password);
                    decryptAndRender(password);
                    return;
                }

                //check if password is already in storage
                password = localStorage.getItem("password");
                if (password) {
                    decryptAndRender(password);
                    return;
                }

            }

        } catch (error) {
            //clear session storage on error.
            localStorage.removeItem("password");
            if (error) {
                if (error.message == "ccm: tag doesn't match") {
                    showAlert("Password incorrect");
                } else if (error.message) {
                    showAlert(error.message);
                } else {
                    showAlert("Something went wrong.");
                }
            }
        }

    }

    function decryptAndRender(password) {
        var decryptedHtmlPage = sjcl.decrypt(password, encryptedHtml);
        document.open("text/html", "replace");
        document.write(decryptedHtmlPage);
        document.close();
    }

    function getParameterByName(name, url = window.location.href) {
        name = name.replace(/[\[\]]/g, '\\$&');
        var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, ' '));
    }

    function showAlert(message) {
        var container = document.getElementById("alert");
        if (container) {
            container.outerHTML = `<p id="alert" class="alert" onClick="dismissAlert()"><a href="#" onClick="dismissAlert()">[x]</a>&nbsp;&nbsp;${message}</p>`;
            alertShown = true;
        }
    }

    function dismissAlert() {
        var container = document.getElementById("alert");
        if (container) {
            container.outerHTML = `<p id="alert"></p>`;
            alertShown = false;
        }
    }

    function passwordKeyPress(event) {
        if (alertShown) {
            dismissAlert();
        }
        if (event.key == "Enter") {
            login(true);
        }
    }

    var encryptedHtml = '{"iv":"C+AwKeHKgNl6lLCD1pitqQ==","v":1,"iter":10000,"ks":128,"ts":64,"mode":"ccm","adata":"","cipher":"aes","salt":"9yXl9RbCtec=","ct":"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"}';

    login();


</script>

<body onload="onLoad()">

    <noscript>
        <p class="alert">This site requires JavaScript to function. Login will not function without scripts enabled.</p>
    </noscript>

    <p id="alert"></p>

    <h1>
        Login
    </h1>

    <div>
        <label for="password">Password</label>
        <input type="password" id="password" required disabled onkeypress="passwordKeyPress(event)" />
        <p>Ask Fern if you don't know the password.</p>
    </div>

    <p>
        <button disabled type="button" id="loginBtn" onclick="login(true)">
            Login
        </button>
    </p>

    <script>

        function onLoad() {

            //enable login button.
            document.getElementById("loginBtn").removeAttribute("disabled");
            document.getElementById("password").removeAttribute("disabled");

            login();

        }

    </script>

</body>

</html>